# Test the examples in the examples directory                        -*-tcl-*-
#
# $Id$

source [file join [file dirname [file join [pwd] [info script]]] init.tcl]

if {![file exists tcl.jpg]} {
    file link tcl.jpg ../examples/tcl.jpg
}

test examples-1.1 {example test0} -body {
    source ../examples/test0.tcl
    exec diff ../examples/test0.pdf test0.pdf
} -result {} -cleanup {catch {p1 destroy}}

test examples-1.2 {example test1} -body {
    source ../examples/test1.tcl
    exec diff ../examples/test1.pdf test1.pdf
} -result {} -cleanup {catch {p1 destroy}}

test examples-1.3 {example test2} -body {
    source ../examples/test2.tcl
    exec diff ../examples/test2.pdf test2.pdf
} -result {} -cleanup {catch {p1 destroy}}

test examples-1.4 {example test4} -body {
    source ../examples/test4.tcl
    exec diff ../examples/test4.pdf test4.pdf
} -result {} -cleanup {catch {p1 destroy}}

test examples-1.5 {example test5} -body {
    source ../examples/test5.tcl
    exec diff ../examples/test5.pdf test5.pdf
} -result {} -cleanup {catch {p1 destroy}}

test examples-2.1 {experiment} -body {
    pdf4tcl::new apa
    apa getDrawableArea
    apa startPage
    apa setTextPosition 10 10
    for {set t 70} {$t < 90} {incr t} {
        set size [expr {$t / 10.0}]
        apa setFont $size Courier
        set txt "Courier $size"
        set w [apa getCharWidth $txt] 
        apa drawText "$txt is $w wide"
    }
    apa write -file experiment.pdf
    apa destroy
    set x {}
} -result {}

# Cleanup
eval file delete [glob test*.pdf]
file delete tcl.jpg

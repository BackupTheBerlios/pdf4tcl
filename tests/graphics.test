# Test graphic commands                                              -*-tcl-*-
#
# $Id$

source [file join [file dirname [file join [pwd] [info script]]] init.tcl]

test graphics-1.1 {circle} -body {
    mytest {circle 10  10  5} {
        115 210 m
        115 212.761 112.761 215 110 215 c
        107.239 215 105 212.761 105 210 c
        105 207.239 107.239 205 110 205 c
        112.761 205 115 207.239 115 210 c
        s
    }
} -result 1

test graphics-1.2 {circle} -body {
    mytest {circle 10  10  5 -filled 1} {
        115 210 m
        115 212.761 112.761 215 110 215 c
        107.239 215 105 212.761 105 210 c
        105 207.239 107.239 205 110 205 c
        112.761 205 115 207.239 115 210 c
        b
    }
} -result 1

test graphics-2.1 {arc} -body {
    # 360 degree arc = circle
    mytest {arc 10  10  5 50 360} {
        115 210 m
        115 212.761 112.761 215 110 215 c
        107.239 215 105 212.761 105 210 c
        105 207.239 107.239 205 110 205 c
        112.761 205 115 207.239 115 210 c
        s
    }
} -result 1

test graphics-2.2 {arc} -body {
    # 0 degree arc = nothing
    mytest {arc 10  10  5 60 0.0001} {stream endstream}
} -result 1

test graphics-3.1 {image} -body {
    mytest -orient 1 \
            {putRawImage {{#ff0000 #00ff00} {#0000ff #000000}} 40 50 -width 100} \
            {line 35 45 45 55} {line 35 55 45 45} {
                q
                100 0 0 100 140 750 cm
                BI /W 2 /H 2 /CS /RGB /BPC 8
                ID
    }
} -result 1

test graphics-3.2 {image} -body {
    # Test both orientations
    mytest \
            {putRawImage {{#ff0000 #00ff00} {#0000ff #000000}} 40 50 -width 100} \
            {line 35 45 45 55} {line 35 55 45 45} {
                q
                100 0 0 100 140 250 cm
                BI /W 2 /H 2 /CS /RGB /BPC 8
                ID
    }
} -result 1

test graphics-4.1 {line} -body {
    mytest {setLineStyle 10 5 7} {line 100 100 400 700} {
         10 w \[5 7\] 0 d 200 300 m 500 900 l S
    }
} -result 1

test graphics-4.2 {line} -body {
    mytest -orient 1 \
            {setLineStyle 20} \
            {line 0 0 300 600} {
        20 w \[\] 0 d 100 900 m 400 300 l S
    }
} -result 1

test graphics-5.1 {oval} -body {
    mytest {oval 10 10 5 5} {
        115 210 m
        115 212.761 112.761 215 110 215 c
        107.239 215 105 212.761 105 210 c
        105 207.239 107.239 205 110 205 c
        112.761 205 115 207.239 115 210 c
        s
    }
} -result 1

test graphics-5.2 {oval} -body {
    mytest {oval 10 10 4 8 -filled 1} {
        114 210 m
        114 214.418 112.209 218 110 218 c
        107.791 218 106 214.418 106 210 c
        106 205.582 107.791 202 110 202 c
        112.209 202 114 205.582 114 210 c
        b
    }
} -result 1

test graphics-5.3 {oval} -body {
    mytest {oval 10 10 4 8 -filled 1 -stroke 0} {
        114 210 m
        114 214.418 112.209 218 110 218 c
        107.791 218 106 214.418 106 210 c
        106 205.582 107.791 202 110 202 c
        112.209 202 114 205.582 114 210 c
        f
    }
} -result 1
